### [网络协议 - 八股文](#)
**介绍**:  C++ 八股取士、经典题目！

-----


#### [1. TCP和UDP的区别](#)

TCP传输控制协议，UDP用户数据报协议，最基本的区别就是有无链接，是否可靠、拥塞控制、确认重传，这些都是理论部分、或者书面上的内容！

在实际Socket编程中区别还是蛮多的:

1. TCP 是**流式协议**，UDP是**数据报协议**，前者可以面向**字节流**传输、读取，后者却不能，只能一个报文一个报文的传输读取。
   1. TCP read/recv ， write/send 可以指定读取发送的字节数量，但是 recvfrom 每次就是读取一个报文，sendto就是发一个报文。
2. TCP由于有重传机制所以没有**MTU**的问题，但是UDP由于没有重传，IP分片后，会丢失内容，所以数据报长度最好小于**1472**，甚至是**576**。
3. 从**缓冲区**来说，TCP 每一个socket都有读写缓存区，但是TCP 只有一个读缓存区，没写缓存。
4. 从**IO复用**的角度来说，TCP可以基于IO复用，但是后者却一般不需要IO复用，不朽的经典《Unix网络编程卷一》中注明：**“大多数情况下，TCP服务器是并发的，UDP的服务器是迭代的”** 。 
5. 从**通信方式**来看，前者只能1对1通信，后者却可以 1对n 组播，广播。
6. 从它们的**首部内容**来说，前者20字节，后者8字节。
7. 从**应用方向**来说，UDP适应用时延敏感型应用，容忍少量丢弃例如游戏，多媒体应用。
8. TCP有粘包问题，但是UDP没有。



**口诀**：MTU缓存区，通信方式看首部，流式应用有粘包，复用IO谈不了。



#### [2. 两元组、四元组、五元组](#)

* 两元组： {目的IP地址,目的Port端口}
* 四元组： {源IP地址,源Port端口，目的IP地址,目的Port端口}
* 五元组： {源IP地址,源Port端口，目的IP地址,目的Port端口，传输层协议(UDP/TCP)}

一般UDP报文会使用两元组到对应的处理套接字，TCP使用四元组，connect UDP套接字会维护一个五元组 。



#### 3. 网络数据是被接受的？

首先**网卡**收到电信号，然后将接收到的信号转换成数字信息。然后经过**网卡驱动程序**(网络协议栈与网卡硬件进行交互,实现数据包的发送和接收)，进入**网络协议栈**(tcp/udp分段重组)，最终被存放到**socket缓存区**，然后等待用户使用**系统调用**(read/recv/recvfrom)读取数据。

